# AmritaCore的内置能力

## 9.1 内置工具

AmritaCore 提供了几种内置工具，以支持智能体的核心行为。这些工具是框架内部定义的，用于实现特定的功能。

### 9.1.1 STOP_TOOL (停止工具)

`STOP_TOOL` 是一个内置工具，用于表示Agent已经收集到足够的信息，准备形成最终答案。当调用此工具时，Agent应该不再调用其他工具，而是直接提供完成的结果。

- **名称**: `agent_stop`
- **描述**: 表示已完成信息收集并准备生成最终答案
- **参数**:
  - `result` (可选): 简要说明在聊天任务中完成了什么

### 9.1.2 REASONING_TOOL (推理工具)

`REASONING_TOOL` 用于思考下一步应该做什么，通常在完成工具调用后调用此工具进行思考。这个工具对于实现智能体的自主决策至关重要。

- **名称**: `think_and_reason`
- **描述**: 思考下一步应该做什么
- **参数**:
  - `content`: 描述接下来要做的事情

### 9.1.3 PROCESS_MESSAGE (处理消息工具)

`PROCESS_MESSAGE` 用于描述Agent当前正在执行的操作，并向用户表达Agent的内部想法。当需要向用户传达当前操作或内部推理时使用此工具，而不是用于一般性的完成。

- **名称**: `processing_message`
- **描述**: 描述Agent当前正在执行的操作并向用户表达内部想法
- **参数**:
  - `content`: 消息内容，以系统指令的语气描述正在执行的操作或与用户的交互

## 9.2 内置适配器

AmritaCore 提供了一个内置的 OpenAI 适配器，用于与 OpenAI API 进行交互。

### 9.2.1 OpenAIAdapter

`OpenAIAdapter` 是一个模型适配器，实现了与 OpenAI API 的通信协议。该适配器支持：

- **API 调用**: 异步调用 OpenAI API 获取聊天回复
- **流式响应**: 支持流式响应，可以实时输出内容
- **工具调用**: 支持 OpenAI 的函数调用功能
- **用量统计**: 跟踪 API 调用的用量信息

适配器的主要功能包括：
1. 创建异步 OpenAI 客户端连接
2. 根据配置处理流式或非流式响应
3. 解析并验证 API 响应
4. 处理工具调用请求

## 9.3 内置Agent系统

AmritaCore 包含一个智能体系统，能够自主地使用工具来完成任务。

### 9.3.1 Agent工作流程

Agent系统的工作流程如下：

1. **推理阶段**: Agent首先分析任务需求，确定下一步行动
2. **工具选择**: 根据当前情况选择适当的工具
3. **工具执行**: 执行选定的工具
4. **结果评估**: 评估工具执行结果
5. **循环执行**: 重复以上步骤直到达到目标
6. **结束**: 使用 `STOP_TOOL` 结束任务

### 9.3.2 Agent配置选项

Agent的行为可以通过配置进行调整：

- **思维模式**: 可配置Agent是否使用推理工具进行思考
- **工具调用限制**: 限制连续工具调用的数量，防止无限循环
- **中间消息**: 控制是否显示Agent的中间处理消息
- **错误处理**: 定义工具执行失败时的处理策略